<div align="center">

<h1>引号和转义</h1>

</div>

# 目录

- [目录](#目录)
- [转义](#转义)
- [单引号](#单引号)
- [双引号](#双引号)
- [Here 文档](#here-文档)
- [Here 字符串](#here-字符串)

# 转义

```bash
# 输出$date不会有任何结果，因为$是一个特殊字符
$ echo $date

# 需转义，添加反斜杠 \，使其变为普通字符
$ echo \$date
$date

# \ 本身也是特殊字符，使用时也要转义
$ echo \\
\
```

反斜杠除了用于转义，还可以表示一些不可打印的字符。

- `\a`：响铃
- `\b`：退格
- `\n`：换行
- `\r`：回车
- `\t`：制表符

使用 `echo` 命令时加上 `-e` 参数可以输出这些字符：

```bash
# 默认情况
$ echo a\tb
atb

# 添加 -e 参数进行解释
$ echo -e "a\tb"
a        b
```

`\` 还可以用于将一行命令写成多行：

```bash
$ mv \
/path/to/foo \
/path/to/bar

# 等同于
$ mv /path/to/foo /path/to/bar
```

换行符前面加上反斜杠转义，就使得换行符变成一个普通字符，`Bash` 会将其当作长度为`0`的空字符处理。

> [返回目录 ↑ ](#目录)

# 单引号

`Bash` 允许字符串放在单引号或双引号之中，加以引用。特殊字符只要放在单引号里面，都会变为普通字符。比如星号（`*`）、美元符号（`$`）、反斜杠（`\`）等。

```bash
$ echo '*'
*

$ echo '$USER'
$USER

$ echo '$((2+2))'
$((2+2))

$ echo '$(echo foo)'
$(echo foo)
```

另外需要注意：

```
# 不正确
$ echo it's

# 不正确
$ echo 'it\'s'

# 正确
$ echo $'it\'s'

# 正确（推荐）
$ echo "it's"
it's
```

> [返回目录 ↑ ](#目录)

# 双引号

和单引号类似，讲特殊符号放入双引号中，就会失去特殊含义，变为普通字符。

但有一些特殊字符仍起作用：

```bash
# $ 用于引用变量
$ echo "$SHELL"
/bin/bash

# ` 用于执行子命令
$ echo "`date`"
Tue Dec 26 02:50:46 EST 2023

# \ 用于转义
$ echo "\\"
\
```

另外，`""`双引号还可以用来输入多行命令：

```bash
$ echo "hello
world"
hello
world
```

还有一种场景，由于文件名包含空格，因此需要使用双引号括起来：

```bash
$ ls "two words.txt"
```

双引号会原样保存多余的空格。

```bash
$ echo "this is a     test"
this is a     test
```

双引号还有一个作用，就是保存原始命令的输出格式。

```bash
# 默认单行输出
$ echo $(cal)
December 2023 Su Mo Tu We Th Fr Sa 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31

# 原始格式输出
$ echo "$(cal)"
   December 2023      
Su Mo Tu We Th Fr Sa  
                1  2  
 3  4  5  6  7  8  9  
10 11 12 13 14 15 16  
17 18 19 20 21 22 23  
24 25 26 27 28 29 30  
31 
```

> [返回目录 ↑ ](#目录)


# Here 文档

Here文档（here document）是一种用于输入多行字符串的技术，通过指定开始标记和结束标记之间的文本内容来实现。

1. **Here文档的格式：**
   ```bash
   command << token
   string 1
   string 2
   ...
   string n
   token
   ```
   - `command`：将多行字符串`string`重定向输出给`command`命令。
   - 开始标记：`<< token`，其中`token`是用户选择的标记名称，自定义。
   - 结束标记：`token`，独立一行写，必须顶格，否则结束标记不会起作用。
   - 开始标记和结束标记之间就是多行字符串的内容。

2. **示例：**
   ```bash
   $ cat << _EOF_
   > <html>
   > <head>
   >     <title>
   >     The title of your page
   >     </title>
   > </head>
   > 
   > <body>
   >     Your page content goes here.
   > </body>
   > </html>
   > _EOF_
   ```
   上述示例展示了使用Here文档输出HTML代码的方法。

3. **注意事项，Here文档内部：**
   - 支持变量替换（可以使用单引号将Here文档的开始标记括起，防止变量替换）
   - 支持反斜杠转义
   - 不支持通配符扩展
   - 双引号、单引号失去语法作用，变成普通字符。

4. **重定向：**
   - Here文档的本质是重定向，将字符串输出给某个命令。
   - 只适用于那些可以接受标准输入作为参数的命令，对于其他命令无效，比如 `echo`。
   - 不能作为变量的值，仅用于命令的参数。

Here 文档在Shell脚本中常用于将多行文本传递给命令，或者生成脚本中的动态内容。

> [返回目录 ↑ ](#目录)

# Here 字符串

`Here 字符串`是 `Here 文档` 的一种变体，它使用三个小于号 `<<<` 表示。这种语法的主要作用是将字符串通过标准输入传递给命令。

1. **Here 字符串的语法：**
   ```bash
   <<< string
   ```
   这里，`string` 是要传递给命令的字符串。

2. **通过标准输入传递给命令：**
   - `Here` 字符串的作用是将字符串通过标准输入传递给命令。
   - 有些命令直接接受给定的参数，而有些命令通过标准输入接受参数，使用 `Here` 字符串可以更方便地处理这种情况。

3. **示例：**
   ```bash
   $ cat <<< 'hi there'
   ```
   这个例子中，Here 字符串将字符串 "hi there" 传递给 `cat` 命令，从而达到与 `echo 'hi there' | cat` 类似的效果。

4. **语法简洁性：**
   - 相较于使用管道 `|` 的语法，Here 字符串的语法更为简洁，更容易理解。


>  命令直接接受给定的参数时，指的是命令在执行时通过命令行参数（command-line arguments）直接接收输入。这意味着你可以在命令的调用中明确指定参数值。例如：
>
> ```bash
> ls -l /path/to/directory
> ```
>
> 在这个例子中，`ls` 命令直接接受了两个参数：`-l` 用于显示详细的列表信息，以及 `/path/to/directory` 作为要列出内容的目录路径。
>
> 相反，有些命令通过标准输入（stdin）接受输入。这意味着命令从标准输入流中读取数据，而不是通过命令行参数直接获取。一个常见的例子是 `cat` 命令，它用于将文件内容输出到终端。如果没有指定文件名作为参数，`cat` 将等待用户通过键盘输入，然后将输入的内容输出。
>
> ```bash
> cat
> ```
>
> 在这个例子中，`cat` 命令通过标准输入接受用户输入，直到用户按下 Ctrl+D（在Unix/Linux系统中表示输入结束）为止。
>
> 所以，当使用 Here 字符串（`<<<`）时，它可以方便地将字符串传递给那些通过标准输入接受参数的命令。这种方法对于需要从标准输入获取数据的命令更为便捷。

> [返回目录 ↑ ](#目录)