<div align="center">

<h1>基于LInux的嵌入式软件开发</h1>

</div>

# 目录

- [目录](#目录)
- [1、嵌入式软件结构](#1嵌入式软件结构)
  - [1.1 软件体系结构](#11-软件体系结构)
  - [1.2 基于Linux的嵌入式软件](#12-基于linux的嵌入式软件)
    - [(1) BootLoader](#1-bootloader)
    - [(2) Linux内核](#2-linux内核)
    - [(3) 应用程序](#3-应用程序)
- [2、嵌入式软件开发流程](#2嵌入式软件开发流程)
  - [2.1 嵌入式Linux设计概述](#21-嵌入式linux设计概述)
  - [2.2 基于开发板的二次开发](#22-基于开发板的二次开发)
  - [2.3 基于Linux的嵌入式软件开发流程](#23-基于linux的嵌入式软件开发流程)
- [4、嵌入式系统引导代码](#4嵌入式系统引导代码)
- [5、嵌入式内核结构及移植](#5嵌入式内核结构及移植)
- [6、嵌入式文件系统及移植](#6嵌入式文件系统及移植)
- [7、Linux设备驱动概述](#7linux设备驱动概述)
- [8、设备驱动程序接口](#8设备驱动程序接口)
- [9、Linux设备驱动开发流程](#9linux设备驱动开发流程)


# 1、嵌入式软件结构

## 1.1 软件体系结构

自顶向下，分别是：

1. **应用软件层**：用户应用程序主要调用系统的API函数来对系统进行操作，完成用户应用功能开发。
2. **中间件层**：基础软件的一大类，属于可复用软件，为应用软件层提供运行和开发的环境。
3. **操作系统层**：如果有，则一般以内核映像的形式下载到目标系统中。
4. **设备驱动层**：为上层软件提供了设备的操作接口，包括硬件抽象层、板级支持包和设备驱动程序
5. **硬件层**：包括嵌入式微处理器、存储器和键盘等输入输出设备


## 1.2 基于Linux的嵌入式软件

**硬件之上 → 引导程序 BootLoader → Linux内核 → 应用程序**

### (1) BootLoader

引导装载程序 `BootLoader` ，通常是在任何硬件上执行的第一段代码，负责整个系统的加载启动任务，初始化硬件，建立内存空间的映射图，准备好正确的环境。

常见的 `BootLoader` 有 `uboot` 和 `Vivi` 等。

### (2) Linux内核

**Linux内核**的开发工作主要包括**Linux内核**的定制和裁剪等工作。

内核通过硬件的设备驱动程序来控制它们。

### (3) 应用程序

基于 GUI 的应用程序开发越来越重要。

目前比较流行的 GUI 平台有 `QT/Embedded`、紧缩的 `X Windows` 系统、`MicroWindows`以及`MiniGUI`系统。

# 2、嵌入式软件开发流程

## 2.1 嵌入式Linux设计概述

采用交叉编译调试的方式进行软件开发。

调试环境建立在宿主机（host，一台PC机）上，对应的开发平台称为目标机（target），开发完成后将可执行的二进制代码下载到目标机上运行即可。

## 2.2 基于开发板的二次开发

二次开发指的是利用现有的开发板进行开发。

在当前嵌入式领域中，ARM（Advanced RISC Machines） 处理器被广泛应用于各种嵌入式设备中。



## 2.3 基于Linux的嵌入式软件开发流程

流程如下：

1. 建立开发环境，下载并安装交叉编译器
2. 配置开发主机，设置MINICOM、配置网络（如NFS网络文件系统）
3. 建立引导装载程序BootLoader，下载并进行移植修改
4. 移植Linux操作系统，如μClinux、ARM-Linux等
5. 建立根文件系统，一般设为只读
6. 建立应用程序的文件系统，规划Flash的分区方案


# 4、嵌入式系统引导代码



# 5、嵌入式内核结构及移植




# 6、嵌入式文件系统及移植




# 7、Linux设备驱动概述





# 8、设备驱动程序接口





# 9、Linux设备驱动开发流程